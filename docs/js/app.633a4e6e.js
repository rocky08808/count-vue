(function(e){function t(t){for(var n,s,l=t[0],c=t[1],d=t[2],u=0,f=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);i&&i(t);while(f.length)f.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==o[c]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},o={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var i=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("0355")},"0355":function(e,t,a){},"126e":function(e,t,a){},"35b5":function(e,t,a){"use strict";a("e08d")},"56d7":function(e,t,a){"use strict";a.r(t);a("fe23"),a("0f9e"),a("6840"),a("e6ee");var n=a("d04a"),o=a("b9e5"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],l=(a("034f"),a("b709")),c={},d=Object(l["a"])(c,r,s,!1,null,null,null),i=d.exports,u=a("1783"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月","confirm-button-text":"搜索","cancel-button-text":" "},on:{change:e.getTableList,confirm:e.getTableList},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}}),a("div",[a("CTable",{attrs:{columns:e.columns,data:e.tableList},on:{trClick:e.handleDel}}),e.tableList.length?a("div",{staticClass:"total-box"},[e._v(" total: "),a("span",{class:e.totalIncome>0?"red":"green"},[e._v(e._s(e.totalIncome))]),e._v(" + "),a("span",{class:e.totalOther>0?"red":"green"},[e._v(e._s(e.totalOther))]),e._v(" = "),a("span",{class:e.totalIncome+e.totalOther>0?"red":"green"},[e._v(e._s(e.totalIncome+e.totalOther))])]):e._e()],1),a("div",{staticClass:"btn-box"},[a("van-button",{attrs:{type:"primary",size:"small",block:""},on:{click:e.handleAdd}},[e._v("新增记录")]),a("br"),a("van-button",{attrs:{type:"warning",size:"small",block:""},on:{click:e.handleShowMonth}},[e._v("查看月收益")]),a("br"),a("van-button",{attrs:{type:"danger",size:"small",block:""},on:{click:e.handleCheckPool}},[e._v("资金池")])],1),a("van-popup",{ref:"showMonth",attrs:{position:"bottom"},model:{value:e.showMonth,callback:function(t){e.showMonth=t},expression:"showMonth"}},[a("van-field",{attrs:{label:"年份"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}}),a("CTable",{attrs:{columns:e.monthColumns,data:e.monthList}}),a("div",{staticClass:"center"},[e._v(" 合计："),a("span",{class:e.monthTotal>0?"red":"green"},[e._v(e._s(e.monthTotal))])]),a("div",{staticClass:"mar16"},[a("van-button",{attrs:{round:"",block:"",type:"warning",size:"small"},on:{click:e.handleMonthSearch}},[e._v("查询")])],1)],1),a("van-popup",{ref:"addPopup",attrs:{position:"bottom"},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[a("van-form",{on:{submit:e.handleAddSubmit}},[a("van-field",{attrs:{label:"日期"},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-datetime-picker",{attrs:{"cancel-button-text":" ",type:"month-day",title:"选择月日"},model:{value:e.addData.date,callback:function(t){e.$set(e.addData,"date",t)},expression:"addData.date"}})]},proxy:!0}])}),a("van-field",{attrs:{label:"收入",placeholder:"收入"},model:{value:e.addData.income,callback:function(t){e.$set(e.addData,"income",t)},expression:"addData.income"}}),a("van-field",{attrs:{label:"其他",placeholder:"其他"},model:{value:e.addData.other,callback:function(t){e.$set(e.addData,"other",t)},expression:"addData.other"}}),a("van-field",{attrs:{label:"日志",placeholder:"日志"},model:{value:e.addData.log,callback:function(t){e.$set(e.addData,"log",t)},expression:"addData.log"}}),a("div",{staticClass:"mar16"},[a("van-button",{attrs:{round:"",block:"",type:"primary",size:"small","native-type":"submit"}},[e._v("新增")])],1)],1)],1),a("van-popup",{ref:"pool",attrs:{position:"bottom"},model:{value:e.showPool,callback:function(t){e.showPool=t},expression:"showPool"}},[a("CTable",{attrs:{columns:e.poolColumns,data:e.poolList}}),a("br"),a("div",{staticClass:"mar16"},[a("van-button",{attrs:{round:"",block:"",type:"primary",size:"small"},on:{click:e.handleAddPool}},[e._v("新增")])],1)],1),a("van-dialog",{attrs:{title:"等级",showCancelButton:""},on:{confirm:e.handleAddPoolSubmit},model:{value:e.addPoolShow,callback:function(t){e.addPoolShow=t},expression:"addPoolShow"}},[a("van-form",[a("van-field",{attrs:{label:"等级",type:"number",placeholder:"等级"},model:{value:e.addPoolForm.level,callback:function(t){e.$set(e.addPoolForm,"level",t)},expression:"addPoolForm.level"}}),a("van-field",{attrs:{label:"资金池",type:"number",placeholder:"资金池"},model:{value:e.addPoolForm.pool,callback:function(t){e.$set(e.addPoolForm,"pool",t)},expression:"addPoolForm.pool"}})],1)],1)],1)},b=[],h=a("ca39"),m=a("9da1"),p=a("e3c6"),j=(a("df1c"),a("1841"),a("0ceb"),a("7aac"),a("d566"),a("86c5"),a("377e"),a("14fc"),a("f9e0")),v=a.n(j),g=a("7d7c"),k=a("9225"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"table"},[a("tr",e._l(e.columns,(function(t,n){return a("td",{key:n,staticClass:"center"},[e._v(e._s(t.label))])})),0),e._l(e.data,(function(t,n){return a("tr",{key:n,on:{click:function(a){return e.handleTrClick(t)}}},e._l(e.columns,(function(n,o){return a("td",{key:o,staticClass:"data-text"},[n.render?a("TRender",{attrs:{"render-fn":n.render,row:t}}):a("span",[e._v(e._s(t[n.prop]))])],1)})),0)})),a("tr",[0===e.data.length?a("td",{staticClass:"data-text",attrs:{colspan:e.columns.length}},[e._v(" 暂无数据 ")]):e._e()])],2)},w=[],O={props:{renderFn:Function,row:Object},render:function(e){return this.renderFn(e,this.row)}},P={name:"Table",props:{columns:Array,data:Array},components:{TRender:O},methods:{handleTrClick:function(e){this.$emit("trClick",e)}}},_=P,x=(a("35b5"),Object(l["a"])(_,y,w,!1,null,"9ee3163a",null)),D=x.exports,z=a("47c1"),T=(a("9165"),a("9f1b"),a("420c"),function(e,t){var a=t;try{a=JSON.stringify(t)}catch(n){console.log(n)}localStorage.setItem(e,a)}),C=function(e){return JSON.parse(localStorage.getItem(e))},S="forms",M=function(e){var t=C(S),a=[];return t&&(a=t[e]||[]),a},L=function(e,t){var a=C(S);if(a){var n=a[e]||[];n.push(t),a=Object(h["a"])(Object(h["a"])({},a),{},Object(z["a"])({},e,n))}else a=Object(z["a"])({},e,[t]);T(S,a)},F=function(e,t){var a=C(S);if(a){var n,o=a[e]||[];o.find((function(e,a){if(e.id===t)return n=a,!0})),void 0!==n&&(o.splice(n,1),a=Object(h["a"])(Object(h["a"])({},a),{},Object(z["a"])({},e,o)),T(S,a))}},Y="pool",$=function(){return C(Y)||{}},A=function(e,t){var a=$();a[e]=t,T(Y,a)},I=function(e){var t=$();t[e]&&(delete t[e],T(Y,t))},E={name:"Home",components:{CTable:D},data:function(){var e=this;return{monthColumns:[{label:"日期",prop:"date"},{label:"收入",prop:"income",render:function(e,t){var a=t.income;return a=a?1*a:0,e("span",{class:a>0?"red":"green"},a)}},{label:"其他",prop:"other",render:function(e,t){var a=t.other;return a=a?1*a:0,e("span",{class:a>0?"red":"green"},a)}},{label:"合计",prop:"total",render:function(e,t){var a=t.total;return a=a?1*a:0,e("span",{class:a>0?"red":"green"},a)}}],columns:[{label:"日期",prop:"date"},{label:"收入",prop:"income",render:function(e,t){var a=t.income;return a=a?1*a:0,e("span",{class:a>0?"red":"green"},a)}},{label:"其他",prop:"other",render:function(e,t){var a=t.other;return a=a?1*a:0,e("span",{class:a>0?"red":"green"},a)}},{label:"日志",prop:"log"}],poolColumns:[{label:"等级",prop:"level"},{label:"资金池",prop:"pool"},{label:"操作",render:function(t,a){return t("div",[t("span",{on:{click:function(){return e.handleEditPool(a)}}}," 编辑 "),t("span",{on:{click:function(){return e.handlePoolDel(a)}}}," 删除 ")])}}],tableList:[],monthList:[],poolList:[],addPoolForm:{level:"",pool:""},currentDate:new Date,addData:{date:new Date,income:"",other:"",log:""},username:"",showAdd:!1,showMonth:!1,showPool:!1,addPoolShow:!1,year:(new Date).getFullYear(),totalOther:0,totalIncome:0,mTotalother:0,mTotalIncome:0}},created:function(){this.username=C("username"),this.getTableList()},watch:{username:function(){T("username",this.username)}},computed:{monthTotal:function(){return this.mTotalIncome+this.mTotalother}},methods:{handleEditPool:function(e){var t=e.level,a=e.pool;this.addPoolForm.level=t,this.addPoolForm.pool=a,this.addPoolShow=!0},handlePoolDel:function(e){var t=this,a=e.level;g["a"].confirm({title:"删除",message:"删除该等级 ？"}).then((function(){I(a),Object(k["a"])("删除成功"),t.getPoolData()}))},handleCheckPool:function(){this.showPool=!0,this.getPoolData()},handleAddPool:function(){this.addPoolForm.level="",this.addPoolForm.pool="",this.addPoolShow=!0},handleAddPoolSubmit:function(){var e=this.addPoolForm,t=e.level,a=e.pool;return t?a?(A(t,a),Object(k["a"])("操作成功"),this.addPoolShow=!1,void this.getPoolData()):Object(k["a"])("请输入资金池"):Object(k["a"])("请输入等级")},getPoolData:function(){var e=$();if(e){var t=[];for(var a in e){var n=e[a];a&&t.push({level:a,pool:n})}this.poolList=t}},handleDel:function(e){var t=this;this.$dialog.confirm({title:"确认",message:"删除".concat(e.date,"记录？")}).then(Object(p["a"])(Object(m["a"])().mark((function a(){var n;return Object(m["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=v()(t.currentDate).format("YYYY-MM"),F(n,e.id),t.$notify({type:"success",message:"删除成功"}),t.getTableList();case 4:case"end":return a.stop()}}),a)}))))},getTableList:function(){var e=this;return Object(p["a"])(Object(m["a"])().mark((function t(){var a,n,o,r,s,l;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.currentDate,n&&(a=new Date(n)),a=v()(a||new Date).format("YYYY-MM"),o=M(a),o&&(r=o,s=0,l=0,r.length>0&&(r.forEach((function(e){s+=1*e.income||0,l+=1*e.other||0})),r.push({date:"总计",income:s,other:l})),e.totalIncome=s,e.totalOther=l,e.tableList=r);case 5:case"end":return t.stop()}}),t)})))()},handleMonthSearch:function(){var e=C(S),t="".concat(this.year);if(e){var a={},n=[];for(var o in e){var r=new RegExp(t);r.test(o)&&(a[o]=e[o])}for(var s in a){var l=0,c=0;a[s].forEach((function(e){l+=1*e.income,c+=1*e.other})),n.push({date:s,income:l,other:c,total:l+c})}if(n.length){var d=0,i=0;n.forEach((function(e){d+=e.income,i+=e.other})),this.mTotalIncome=d,this.mTotalother=i,n.push({date:"总计",income:d,other:i,total:d+i})}this.monthList=n}},handleShowMonth:function(){this.showMonth=!0,this.handleMonthSearch()},handleAdd:function(){this.showAdd=!0},handleAddSubmit:function(){var e=this;return Object(p["a"])(Object(m["a"])().mark((function t(){var a,n;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.addData.date,a){t.next=3;break}return t.abrupt("return",e.$notify("选择日期"));case 3:n=v()(a).format("YYYY-MM"),L(n,Object(h["a"])(Object(h["a"])({},e.addData),{},{date:v()(a).format("YYYY-MM-DD"),id:+new Date})),e.getTableList(),e.$refs.addPopup.close();case 7:case"end":return t.stop()}}),t)})))()}}},J=E,N=(a("cf3f"),Object(l["a"])(J,f,b,!1,null,"d410d74c",null)),R=N.exports;n["a"].use(u["a"]);var U=[{path:"/",name:"Home",component:R}],q=new u["a"]({routes:U}),H=q,B=a("6c71");n["a"].use(B["a"]);var G=new B["a"].Store({state:{},mutations:{},actions:{},modules:{}}),K=a("4ade"),Q=a.n(K),V=a("2561"),W=Q.a.create({timeout:1e4,baseURL:"http://139.198.175.90"}),X=function(e){return Object(V["a"])({type:"danger",message:e})},Z=function(e){return function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(h["a"])({url:t,method:e},n);return"get"===e?o.params=a:o.data=a,W(o).then((function(e){var t=e.data;return 200===t.code?{res:t}:(X(t.msg),{err:t,response:e})}),(function(e){return{err:e,response:e}}))}},ee=Z("get"),te=Z("post"),ae={getIncomeList:function(e){return ee("/api/list",e)},addIncome:function(e){return te("/api/add_income",e)},delIncome:function(e){return te("/api/del_income",e)}};a("1a34");n["a"].config.productionTip=!1,n["a"].use(o["a"]),n["a"].prototype.$api=ae,new n["a"]({router:H,store:G,render:function(e){return e(i)}}).$mount("#app")},9507:function(e,t,a){var n={"./af":"e02b","./af.js":"e02b","./ar":"42c5","./ar-dz":"2f40","./ar-dz.js":"2f40","./ar-kw":"d0b6","./ar-kw.js":"d0b6","./ar-ly":"9e6b","./ar-ly.js":"9e6b","./ar-ma":"ad43","./ar-ma.js":"ad43","./ar-sa":"d663","./ar-sa.js":"d663","./ar-tn":"73e0","./ar-tn.js":"73e0","./ar.js":"42c5","./az":"4016","./az.js":"4016","./be":"b36e","./be.js":"b36e","./bg":"d352","./bg.js":"d352","./bm":"3c63","./bm.js":"3c63","./bn":"a8fe","./bn-bd":"c68e","./bn-bd.js":"c68e","./bn.js":"a8fe","./bo":"3839","./bo.js":"3839","./br":"05bf","./br.js":"05bf","./bs":"78d1","./bs.js":"78d1","./ca":"8e1f","./ca.js":"8e1f","./cs":"cba7","./cs.js":"cba7","./cv":"659f","./cv.js":"659f","./cy":"7e24","./cy.js":"7e24","./da":"16da","./da.js":"16da","./de":"7b0d","./de-at":"07ba","./de-at.js":"07ba","./de-ch":"c828","./de-ch.js":"c828","./de.js":"7b0d","./dv":"b500","./dv.js":"b500","./el":"ccfa","./el.js":"ccfa","./en-au":"ea16","./en-au.js":"ea16","./en-ca":"fbb3","./en-ca.js":"fbb3","./en-gb":"f239","./en-gb.js":"f239","./en-ie":"3aa6","./en-ie.js":"3aa6","./en-il":"a7d3","./en-il.js":"a7d3","./en-in":"83b7","./en-in.js":"83b7","./en-nz":"b959","./en-nz.js":"b959","./en-sg":"3394","./en-sg.js":"3394","./eo":"96e2","./eo.js":"96e2","./es":"a979","./es-do":"45d7","./es-do.js":"45d7","./es-mx":"c756","./es-mx.js":"c756","./es-us":"99cb","./es-us.js":"99cb","./es.js":"a979","./et":"7f15","./et.js":"7f15","./eu":"7f83","./eu.js":"7f83","./fa":"55ce","./fa.js":"55ce","./fi":"6dd1","./fi.js":"6dd1","./fil":"a274","./fil.js":"a274","./fo":"15c3","./fo.js":"15c3","./fr":"2b66","./fr-ca":"c754","./fr-ca.js":"c754","./fr-ch":"2842","./fr-ch.js":"2842","./fr.js":"2b66","./fy":"ce09","./fy.js":"ce09","./ga":"25da","./ga.js":"25da","./gd":"c0e4","./gd.js":"c0e4","./gl":"c373","./gl.js":"c373","./gom-deva":"7be8","./gom-deva.js":"7be8","./gom-latn":"d215","./gom-latn.js":"d215","./gu":"409f","./gu.js":"409f","./he":"c6ba","./he.js":"c6ba","./hi":"cf0c","./hi.js":"cf0c","./hr":"a676","./hr.js":"a676","./hu":"19b0","./hu.js":"19b0","./hy-am":"6ce7","./hy-am.js":"6ce7","./id":"2400","./id.js":"2400","./is":"9ab2","./is.js":"9ab2","./it":"6f39","./it-ch":"27af","./it-ch.js":"27af","./it.js":"6f39","./ja":"0707","./ja.js":"0707","./jv":"4d88","./jv.js":"4d88","./ka":"e868","./ka.js":"e868","./kk":"865b","./kk.js":"865b","./km":"62ca","./km.js":"62ca","./kn":"1f25","./kn.js":"1f25","./ko":"bff6","./ko.js":"bff6","./ku":"3029","./ku.js":"3029","./ky":"4e4e","./ky.js":"4e4e","./lb":"f369","./lb.js":"f369","./lo":"40cb","./lo.js":"40cb","./lt":"c66c","./lt.js":"c66c","./lv":"5edb","./lv.js":"5edb","./me":"4da8","./me.js":"4da8","./mi":"e040","./mi.js":"e040","./mk":"614b","./mk.js":"614b","./ml":"aa43","./ml.js":"aa43","./mn":"9fc7","./mn.js":"9fc7","./mr":"ee63","./mr.js":"ee63","./ms":"249f","./ms-my":"fb6d","./ms-my.js":"fb6d","./ms.js":"249f","./mt":"ded2","./mt.js":"ded2","./my":"a870","./my.js":"a870","./nb":"fad6","./nb.js":"fad6","./ne":"d847","./ne.js":"d847","./nl":"9c9b","./nl-be":"5975","./nl-be.js":"5975","./nl.js":"9c9b","./nn":"da15","./nn.js":"da15","./oc-lnc":"3ef6","./oc-lnc.js":"3ef6","./pa-in":"0ffa","./pa-in.js":"0ffa","./pl":"50b7","./pl.js":"50b7","./pt":"63b4","./pt-br":"3919","./pt-br.js":"3919","./pt.js":"63b4","./ro":"25aa","./ro.js":"25aa","./ru":"5985","./ru.js":"5985","./sd":"4980","./sd.js":"4980","./se":"a4a1","./se.js":"a4a1","./si":"16a0","./si.js":"16a0","./sk":"a26e","./sk.js":"a26e","./sl":"d463","./sl.js":"d463","./sq":"7877","./sq.js":"7877","./sr":"3724","./sr-cyrl":"1025","./sr-cyrl.js":"1025","./sr.js":"3724","./ss":"9e22","./ss.js":"9e22","./sv":"13c2","./sv.js":"13c2","./sw":"f7ef","./sw.js":"f7ef","./ta":"6d77","./ta.js":"6d77","./te":"7780","./te.js":"7780","./tet":"b6a8","./tet.js":"b6a8","./tg":"d9d8","./tg.js":"d9d8","./th":"aa8b","./th.js":"aa8b","./tk":"ed57","./tk.js":"ed57","./tl-ph":"b0a0","./tl-ph.js":"b0a0","./tlh":"8fd9","./tlh.js":"8fd9","./tr":"3a35","./tr.js":"3a35","./tzl":"5183","./tzl.js":"5183","./tzm":"ce7a","./tzm-latn":"00b1","./tzm-latn.js":"00b1","./tzm.js":"ce7a","./ug-cn":"0176","./ug-cn.js":"0176","./uk":"ba6b","./uk.js":"ba6b","./ur":"0b85","./ur.js":"0b85","./uz":"e160","./uz-latn":"7a1a","./uz-latn.js":"7a1a","./uz.js":"e160","./vi":"7f90","./vi.js":"7f90","./x-pseudo":"37d7","./x-pseudo.js":"37d7","./yo":"328c","./yo.js":"328c","./zh-cn":"96a4","./zh-cn.js":"96a4","./zh-hk":"15a0","./zh-hk.js":"15a0","./zh-mo":"3513","./zh-mo.js":"3513","./zh-tw":"8994","./zh-tw.js":"8994"};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id="9507"},cf3f:function(e,t,a){"use strict";a("126e")},e08d:function(e,t,a){}});
//# sourceMappingURL=app.633a4e6e.js.map